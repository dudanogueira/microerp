{% extends "frontend/frontend-base.html" %}
{% load sekizai_tags %}

<title>{%block title %}{{block.super}} - Produção - Editar Linha do Sub Produto{% endblock %}</title>

{% block content %}
<h1><i class="icon-th"></i> <i class="icon-list-ul"></i> Linha #{{linha.id}} do SubProduto {{subproduto}}</h1>
{% if request.user.perfilacessoproducao.gerente %}
<form method="POST">
    {% csrf_token %}
    {{form.as_p}}
    <button class="btn btn-primary"><i class="icon-pencil"></i> Alterar Linha</button>
</form>
{% endif %}
<hr />
<h2>Opções dessa Linha (#{{linha.id}})</h2>

{% if request.user.perfilacessoproducao.gerente %}
<a href="{% url "producao:editar_linha_subproduto_adicionar_opcao" subproduto.id linha.id %}" class="btn btn-primary"><i class="icon-plus"></i> Adicionar Opção</a>
{% endif %}
<hr />

<table class="table table-condensed table-striped table-rounded">
           <thead>
               <tr>
                   <th>#ID / Padrão</th>
                   <th>Quantidade</th>
                   <th>Componente</th>
                   <th>Descrição</th>
                   <th>Ações</th>
               </tr>
           </thead>
           <tbody>
               {% for opcao in linha.opcaolinhasubproduto_set.all %}
               <tr>
                   <td>#{{opcao.id}} / {% if opcao.padrao %}<span class="badge badge-success">Sim</span>{%else%}Não{%endif%}</td>
                   <td>{{opcao.quantidade}}</td>
                   <td>{{opcao.componente.part_number}}</td>
                   <td>{{opcao.componente.descricao}}</td>
                   <td>
                       {% if request.user.perfilacessoproducao.gerente %}
                           {% if not opcao.padrao %}<a href="{% url "producao:tornar_padrao_opcao_linha_subproduto" subproduto.id linha.id opcao.id %}" class="btn btn-success"><i class="icon-check"></i> tornar padrão</a>{% endif %} <a href="" class="btn btn-danger"><i class="icon-trash"></i> remover</a>
                       {% endif %}
               </tr>
               
               {% empty %}
               <tr>
                   <td>
                       Nenhuma Opção Encontrada.
                   </td>
               </tr>
               {% endfor %}

           </tbody>
       </table>

    {% endblock %}

{% block auxiliar-menu %}
{% addtoblock "js" %}
<script>
$(document).ready(function() {
	$("#menu-producao-subprodutos, #top-menu-producao").addClass("active");
});
</script>
{% endaddtoblock %}
{% include "frontend/producao/producao-menu.html" %}
{% endblock%}