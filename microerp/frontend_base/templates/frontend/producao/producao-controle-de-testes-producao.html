{% extends "frontend/frontend-base.html" %}
{% load sekizai_tags %}
{% load thumbnail %}

<title>{%block title %}{{block.super}} - Produção - Controle de Testes{% endblock %}</title>

{% block content %}
	<h1><i class="fa fa-th"></i> <i class="fa fa-umbrella"></i>  Controle de Testes da Produção</h1>

	<ul class="nav nav-tabs" id="nav-tab-principal">
    <li class="active"><a href="#lancamento-de-falha" data-toggle="tab"><i class="fa fa-rocket"></i> Lançamento de Falhas</a></li>
		<li class=""><a href="#falha-tipo-perda" data-toggle="tab"><i class="fa fa-chain-broken"></i> Falhas de Perda</a></li>
		<li class=""><a href="#falha-tipo-reparo" data-toggle="tab"><i class="fa fa-wrench"></i> Falhas de Reparo</a></li>
	</ul>
	
	<div id="myTabContent" class="tab-content">
		
		<div class="tab-pane fade in active" id="lancamento-de-falha">
			<div class="row-fluid">
				<div class="span6">
					<h2>Lançamentos de Falha</h2>
				</div>
				<div class="span6">
					<a href="{% url "producao:controle_de_testes_producao_lancar_falha" %}" class="btn btn-primary"><i class="fa fa-rocket"></i> Lançar Falha</a>
					
				</div>
			</div>
			<div id="testes-de-perda">
				<table class="table table-condensed table-hover table-rounded">
					<thead>
						<tr>
							<th>ID</th>
							<th>Sub Produto</th>
							<th>Testado</th>
							<th>Funcional</th>
							<th>Perda</th>
							<th>Reparado</th>
							<th>Sem Reparar</th>
						</tr>
					</thead>
					<tbody>
						{% for falha in lancamentos_falha %}
						<tr>
							<td>{{falha.id}}</td>
							<td><a href="{% url "producao:ver_produto" falha.subproduto.id %}">{{falha.subproduto.part_number}}</a></td>
							<td>{{falha.quantidade_total_testada}}</td>
							<td>{{falha.quantidade_funcional}}</td>
							<td>{{falha.quantidade_perdida}}</td>
							<td>{{falha.quantidade_reparada_funcional}}</td>
							<td>{{falha.quantidade_funcional_direta}}</td>
						</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>
			
		</div>
			
		<div class="tab-pane fade in" id="falha-tipo-perda">
			<div class="row-fluid">
				<div class="span6">
					<h2>Falha do Tipo Perda</h2>
				</div>
				<div class="span6">
					<a class="btn btn-primary adicionar-falha-btn" href="{% url "producao:controle_de_testes_producao_adicionar_falha" %}"><i class="fa fa-plus"></i> Adicionar Falha</a>
					<a class="btn btn-success" id="imprimir"><i class="fa fa-print"></i> Imprimir</a>
					
				</div>
			</div>
			
			<div id="testes-de-perda">
				<table class="table table-condensed table-hover table-rounded">
					<thead>
						<tr>
							<th>ID</th>
							<th>Código</th>
							<th>Descrição</th>
						</tr>
					</thead>
					<tbody>
						{% for falha in testes_perda %}
						<tr>
							<td>{{falha.id}}</td>
							<td>{{falha.codigo}}</td>
							<td>{{falha.descricao}}</td>
						</tr>
						{% endfor %}
					
					</tbody>
				</table>
			</div>
			
		</div>
				
		<div class="tab-pane fade in" id="falha-tipo-reparo">
			<div class="row-fluid">
				<div class="span6">
					<h2>Falha do Tipo Perda</h2>
				</div>
				<div class="span6">
					<a class="btn btn-primary adicionar-falha-btn" href="{% url "producao:controle_de_testes_producao_adicionar_falha" %}"><i class="fa fa-plus"></i> Adicionar Falha</a>
					<a class="btn btn-success" id="imprimir"><i class="fa fa-print"></i> Imprimir</a>
					
				</div>
			</div>			
			<div id="testes-de-perda">
				<table class="table table-condensed table-hover table-rounded">
					<thead>
						<tr>
							<th>ID</th>
							<th>Código</th>
							<th>Descrição</th>
						</tr>
					</thead>
					<tbody>
						{% for falha in testes_reparo %}
						<tr>
							<td>{{falha.id}}</td>
							<td>{{falha.codigo}}</td>
							<td>{{falha.descricao}}</td>
						</tr>
						{% endfor %}
					
					</tbody>
				</table>
			</div>
			
			
		</div>
		
		
	</div>


	
{% endblock %}

{% block auxiliar-menu %}
{% addtoblock "js" %}

<script>
$(document).ready(function() {
		var activeTab = $('[href=' + location.hash + ']');
		activeTab && activeTab.click();
    $("#menu-producao-controle-de-testes, #top-menu-producao").addClass("active");
				
});

$('.nav-tabs').on("click", '.nav-tabs li a', function(e){
	e.preventDefault();

	var href = this.hash;
	window.location.hash = this.hash;
	var pane = $(this);
	// ajax load from data-url
	pane.tab('show');		
})

$(document).on("click", "#imprimir", function(e){
	e.preventDefault();
	$(this).hide();
	$("#menu-lateral").hide();
	$("#global-top-menu").hide();
	$(".adicionar-falha-btn").hide();
	$("#main-content").css("padding-top", 0);
	$("#nav-tab-principal").hide();
	$("#content").removeClass('span9').addClass('span11');
});



</script>

{% endaddtoblock %}

{% include "frontend/producao/producao-menu.html" %}

{% endblock%}